<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_192-ea) on Mon Aug 26 13:32:56 PDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TopNHash (Hive 3.1.2 API)</title>
<meta name="date" content="2019-08-26">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TopNHash (Hive 3.1.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TopNHash.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TezDummyStoreOperator.html" title="class in org.apache.hadoop.hive.ql.exec"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hive/ql/exec/TopNHash.html" target="_top">Frames</a></li>
<li><a href="TopNHash.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hive.ql.exec</div>
<h2 title="Class TopNHash" class="title">Class TopNHash</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hive.ql.exec.TopNHash</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hive/ql/exec/PTFTopNHash.html" title="class in org.apache.hadoop.hive.ql.exec">PTFTopNHash</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">TopNHash</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Stores binary key/value in sorted manner to get top-n key/value
 TODO: rename to TopNHeap?</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec">TopNHash.BinaryCollector</a></span></code>
<div class="block">For interaction between operator and top-n hash.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#batchIndexToResult">batchIndexToResult</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#batchSize">batchSize</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec">TopNHash.BinaryCollector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#collector">collector</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#EXCLUDE">EXCLUDE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#FORWARD">FORWARD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#isEnabled">isEnabled</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#threshold">threshold</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#topN">topN</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#usage">usage</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#TopNHash--">TopNHash</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#flush--">flush</a></span>()</code>
<div class="block">Flushes all the rows cached in the heap.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#getVectorizedBatchResult-int-">getVectorizedBatchResult</a></span>(int&nbsp;batchIndex)</code>
<div class="block">Get vectorized batch result for particular index.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#getVectorizedKeyDistLength-int-">getVectorizedKeyDistLength</a></span>(int&nbsp;batchIndex)</code>
<div class="block">After vectorized batch is processed, can return distribution keys length of a key.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#getVectorizedKeyHashCode-int-">getVectorizedKeyHashCode</a></span>(int&nbsp;batchIndex)</code>
<div class="block">After vectorized batch is processed, can return hashCode of a key.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hive/ql/io/HiveKey.html" title="class in org.apache.hadoop.hive.ql.io">HiveKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#getVectorizedKeyToForward-int-">getVectorizedKeyToForward</a></span>(int&nbsp;batchIndex)</code>
<div class="block">After vectorized batch is processed, can return the key that caused a particular row
 to be forwarded.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#initialize-int-float-boolean-org.apache.hadoop.hive.ql.exec.TopNHash.BinaryCollector-org.apache.hadoop.hive.ql.plan.OperatorDesc-org.apache.hadoop.conf.Configuration-">initialize</a></span>(int&nbsp;topN,
          float&nbsp;memUsage,
          boolean&nbsp;isMapGroupBy,
          <a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec">TopNHash.BinaryCollector</a>&nbsp;collector,
          <a href="../../../../../../org/apache/hadoop/hive/ql/plan/OperatorDesc.html" title="interface in org.apache.hadoop.hive.ql.plan">OperatorDesc</a>&nbsp;conf,
          org.apache.hadoop.conf.Configuration&nbsp;hconf)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#startVectorizedBatch-int-">startVectorizedBatch</a></span>(int&nbsp;size)</code>
<div class="block">Perform basic checks and initialize TopNHash for the new vectorized row batch.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#storeValue-int-int-org.apache.hadoop.io.BytesWritable-boolean-">storeValue</a></span>(int&nbsp;index,
          int&nbsp;hashCode,
          org.apache.hadoop.io.BytesWritable&nbsp;value,
          boolean&nbsp;vectorized)</code>
<div class="block">Stores the value for the key in the heap.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#tryStoreKey-org.apache.hadoop.hive.ql.io.HiveKey-boolean-">tryStoreKey</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/io/HiveKey.html" title="class in org.apache.hadoop.hive.ql.io">HiveKey</a>&nbsp;key,
           boolean&nbsp;partColsIsNull)</code>
<div class="block">Try store the non-vectorized key.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.html#tryStoreVectorizedKey-org.apache.hadoop.hive.ql.io.HiveKey-boolean-int-">tryStoreVectorizedKey</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/io/HiveKey.html" title="class in org.apache.hadoop.hive.ql.io">HiveKey</a>&nbsp;key,
                     boolean&nbsp;partColsIsNull,
                     int&nbsp;batchIndex)</code>
<div class="block">Try to put the key from the current vectorized batch into the heap.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="FORWARD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORWARD</h4>
<pre>public static final&nbsp;int FORWARD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hive.ql.exec.TopNHash.FORWARD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="EXCLUDE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EXCLUDE</h4>
<pre>public static final&nbsp;int EXCLUDE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hive.ql.exec.TopNHash.EXCLUDE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="collector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>collector</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec">TopNHash.BinaryCollector</a> collector</pre>
</li>
</ul>
<a name="topN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>topN</h4>
<pre>protected&nbsp;int topN</pre>
</li>
</ul>
<a name="threshold">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>threshold</h4>
<pre>protected&nbsp;long threshold</pre>
</li>
</ul>
<a name="usage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>usage</h4>
<pre>protected&nbsp;long usage</pre>
</li>
</ul>
<a name="batchIndexToResult">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batchIndexToResult</h4>
<pre>protected&nbsp;int[] batchIndexToResult</pre>
</li>
</ul>
<a name="batchSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batchSize</h4>
<pre>protected&nbsp;int batchSize</pre>
</li>
</ul>
<a name="isEnabled">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isEnabled</h4>
<pre>protected&nbsp;boolean isEnabled</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TopNHash--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TopNHash</h4>
<pre>public&nbsp;TopNHash()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize-int-float-boolean-org.apache.hadoop.hive.ql.exec.TopNHash.BinaryCollector-org.apache.hadoop.hive.ql.plan.OperatorDesc-org.apache.hadoop.conf.Configuration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;void&nbsp;initialize(int&nbsp;topN,
                       float&nbsp;memUsage,
                       boolean&nbsp;isMapGroupBy,
                       <a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec">TopNHash.BinaryCollector</a>&nbsp;collector,
                       <a href="../../../../../../org/apache/hadoop/hive/ql/plan/OperatorDesc.html" title="interface in org.apache.hadoop.hive.ql.plan">OperatorDesc</a>&nbsp;conf,
                       org.apache.hadoop.conf.Configuration&nbsp;hconf)</pre>
</li>
</ul>
<a name="tryStoreKey-org.apache.hadoop.hive.ql.io.HiveKey-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryStoreKey</h4>
<pre>public&nbsp;int&nbsp;tryStoreKey(<a href="../../../../../../org/apache/hadoop/hive/ql/io/HiveKey.html" title="class in org.apache.hadoop.hive.ql.io">HiveKey</a>&nbsp;key,
                       boolean&nbsp;partColsIsNull)
                throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a>,
                       <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Try store the non-vectorized key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - Serialized key.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TopNHash.FORWARD if the row should be forwarded;
         TopNHash.EXCLUDED if the row should be discarded;
         any other number if the row is to be stored; the index should be passed to storeValue.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="startVectorizedBatch-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startVectorizedBatch</h4>
<pre>public&nbsp;int&nbsp;startVectorizedBatch(int&nbsp;size)
                         throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block">Perform basic checks and initialize TopNHash for the new vectorized row batch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - batch size</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TopNHash.FORWARD if all rows should be forwarded w/o trying to call TopN;
         TopNHash.EXCLUDED if all rows should be discarded w/o trying to call TopN;
         any other result means the batch has been started.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
<a name="tryStoreVectorizedKey-org.apache.hadoop.hive.ql.io.HiveKey-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryStoreVectorizedKey</h4>
<pre>public&nbsp;void&nbsp;tryStoreVectorizedKey(<a href="../../../../../../org/apache/hadoop/hive/ql/io/HiveKey.html" title="class in org.apache.hadoop.hive.ql.io">HiveKey</a>&nbsp;key,
                                  boolean&nbsp;partColsIsNull,
                                  int&nbsp;batchIndex)
                           throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a>,
                                  <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Try to put the key from the current vectorized batch into the heap.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key.</dd>
<dd><code>batchIndex</code> - The index of the key in the vectorized batch (sequential, not .selected).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="getVectorizedBatchResult-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVectorizedBatchResult</h4>
<pre>public&nbsp;int&nbsp;getVectorizedBatchResult(int&nbsp;batchIndex)</pre>
<div class="block">Get vectorized batch result for particular index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>batchIndex</code> - index of the key in the batch.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result, same as from <code>#tryStoreKey(HiveKey)</code></dd>
</dl>
</li>
</ul>
<a name="getVectorizedKeyToForward-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVectorizedKeyToForward</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hive/ql/io/HiveKey.html" title="class in org.apache.hadoop.hive.ql.io">HiveKey</a>&nbsp;getVectorizedKeyToForward(int&nbsp;batchIndex)</pre>
<div class="block">After vectorized batch is processed, can return the key that caused a particular row
 to be forwarded. Because the row could only be marked to forward because it has
 the same key with some row already in the heap (for GBY), we can use that key from the
 heap to emit the forwarded row.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>batchIndex</code> - index of the key in the batch.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The key corresponding to the index.</dd>
</dl>
</li>
</ul>
<a name="getVectorizedKeyDistLength-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVectorizedKeyDistLength</h4>
<pre>public&nbsp;int&nbsp;getVectorizedKeyDistLength(int&nbsp;batchIndex)</pre>
<div class="block">After vectorized batch is processed, can return distribution keys length of a key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>batchIndex</code> - index of the key in the batch.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The distribution length corresponding to the key.</dd>
</dl>
</li>
</ul>
<a name="getVectorizedKeyHashCode-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVectorizedKeyHashCode</h4>
<pre>public&nbsp;int&nbsp;getVectorizedKeyHashCode(int&nbsp;batchIndex)</pre>
<div class="block">After vectorized batch is processed, can return hashCode of a key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>batchIndex</code> - index of the key in the batch.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The hashCode corresponding to the key.</dd>
</dl>
</li>
</ul>
<a name="storeValue-int-int-org.apache.hadoop.io.BytesWritable-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeValue</h4>
<pre>public&nbsp;void&nbsp;storeValue(int&nbsp;index,
                       int&nbsp;hashCode,
                       org.apache.hadoop.io.BytesWritable&nbsp;value,
                       boolean&nbsp;vectorized)</pre>
<div class="block">Stores the value for the key in the heap.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - The index, either from tryStoreKey or from tryStoreVectorizedKey result.</dd>
<dd><code>hasCode</code> - hashCode of key, used by ptfTopNHash.</dd>
<dd><code>value</code> - The value to store.</dd>
<dd><code>keyHash</code> - The key hash to store.</dd>
<dd><code>vectorized</code> - Whether the result is coming from a vectorized batch.</dd>
</dl>
</li>
</ul>
<a name="flush--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>flush</h4>
<pre>public&nbsp;void&nbsp;flush()
           throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block">Flushes all the rows cached in the heap.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TopNHash.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TezDummyStoreOperator.html" title="class in org.apache.hadoop.hive.ql.exec"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hive/ql/exec/TopNHash.BinaryCollector.html" title="interface in org.apache.hadoop.hive.ql.exec"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hive/ql/exec/TopNHash.html" target="_top">Frames</a></li>
<li><a href="TopNHash.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>

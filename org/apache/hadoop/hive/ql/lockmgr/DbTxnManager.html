<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_192-ea) on Mon Aug 26 13:33:01 PDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DbTxnManager (Hive 3.1.2 API)</title>
<meta name="date" content="2019-08-26">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DbTxnManager (Hive 3.1.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":9,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DbTxnManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbLockManager.html" title="class in org.apache.hadoop.hive.ql.lockmgr"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.Heartbeater.html" title="class in org.apache.hadoop.hive.ql.lockmgr"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html" target="_top">Frames</a></li>
<li><a href="DbTxnManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hive.ql.lockmgr</div>
<h2 title="Class DbTxnManager" class="title">Class DbTxnManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hive.ql.lockmgr.DbTxnManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.hadoop.conf.Configurable, <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">DbTxnManager</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">An implementation of HiveTxnManager that stores the transactions in the metastore database.
 There should be 1 instance o <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html" title="class in org.apache.hadoop.hive.ql.lockmgr"><code>DbTxnManager</code></a> per <a href="../../../../../../org/apache/hadoop/hive/ql/session/SessionState.html" title="class in org.apache.hadoop.hive.ql.session"><code>SessionState</code></a>
 with a single thread accessing it at a time, with the exception of <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#heartbeat--"><code>heartbeat()</code></a> method.
 The later may (usually will) be called from a timer thread.
 See <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getMS--"><code>getMS()</code></a> for more important concurrency/metastore access notes.

 Each statement that the TM (transaction manager) should be aware of should belong to a transaction.
 Effectively, that means any statement that has side effects.  Exceptions are statements like
 Show Compactions, Show Tables, Use Database foo, etc.  The transaction is started either
 explicitly ( via Start Transaction SQL statement from end user - not fully supported) or
 implicitly by the <a href="../../../../../../org/apache/hadoop/hive/ql/Driver.html" title="class in org.apache.hadoop.hive.ql"><code>Driver</code></a> (which looks exactly as autoCommit=true
 from end user poit of view). See more at <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#isExplicitTransaction"><code>isExplicitTransaction</code></a>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.Heartbeater.html" title="class in org.apache.hadoop.hive.ql.lockmgr">DbTxnManager.Heartbeater</a></span></code>
<div class="block">Heartbeater thread</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.HeartbeaterThread.html" title="class in org.apache.hadoop.hive.ql.lockmgr">DbTxnManager.HeartbeaterThread</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hive/conf/HiveConf.html" title="class in org.apache.hadoop.hive.conf">HiveConf</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#conf">conf</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-">acquireLocks</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/QueryPlan.html" title="class in org.apache.hadoop.hive.ql">QueryPlan</a>&nbsp;plan,
            <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql">Context</a>&nbsp;ctx,
            <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username)</code>
<div class="block">Acquire all of the locks needed by a query.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-org.apache.hadoop.hive.ql.Driver.LockedDriverState-">acquireLocks</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/QueryPlan.html" title="class in org.apache.hadoop.hive.ql">QueryPlan</a>&nbsp;plan,
            <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql">Context</a>&nbsp;ctx,
            <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username,
            <a href="../../../../../../org/apache/hadoop/hive/ql/Driver.LockedDriverState.html" title="class in org.apache.hadoop.hive.ql">Driver.LockedDriverState</a>&nbsp;lDrvState)</code>
<div class="block">Acquire all of the locks needed by a query.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hive/metastore/api/LockResponse.html" title="class in org.apache.hadoop.hive.metastore.api">LockResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#acquireMaterializationRebuildLock-java.lang.String-java.lang.String-long-">acquireMaterializationRebuildLock</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                                 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName,
                                 long&nbsp;txnId)</code>
<div class="block">Acquire the materialization rebuild lock for a given view.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#closeTxnManager--">closeTxnManager</a></span>()</code>
<div class="block">This call closes down the transaction manager.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#commitTxn--">commitTxn</a></span>()</code>
<div class="block">Commit the current transaction.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#destruct--">destruct</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#finalize--">finalize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveLockManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveLockManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getAndCheckLockManager--">getAndCheckLockManager</a></span>()</code>
<div class="block">Gets the lock manager and verifies if the explicit lock is supported</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>org.apache.hadoop.conf.Configuration</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getConf--">getConf</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getCurrentTxnId--">getCurrentTxnId</a></span>()</code>
<div class="block">if <code>isTxnOpen()</code>, returns the currently active transaction ID.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getHeartbeatInterval-org.apache.hadoop.conf.Configuration-">getHeartbeatInterval</a></span>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveLockManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveLockManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getLockManager--">getLockManager</a></span>()</code>
<div class="block">we don't expect multiple threads to call this method concurrently but <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#lockMgr"><code>lockMgr</code></a> will
 be read by a different threads than one writing it, thus it's <code>volatile</code></div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getStmtIdAndIncrement--">getStmtIdAndIncrement</a></span>()</code>
<div class="block">Should be though of more as a unique write operation ID in a given txn (at QueryPlan level).</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getTableWriteId-java.lang.String-java.lang.String-">getTableWriteId</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
               <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName)</code>
<div class="block">if <code>isTxnOpen()</code>, returns the table write ID associated with current active transaction.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getTxnManagerName--">getTxnManagerName</a></span>()</code>
<div class="block">Get the name for currently installed transaction manager.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>org.apache.hadoop.hive.common.ValidTxnList</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getValidTxns--">getValidTxns</a></span>()</code>
<div class="block">Get the transactions that are currently valid.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>org.apache.hadoop.hive.common.ValidTxnWriteIdList</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#getValidWriteIds-java.util.List-java.lang.String-">getValidWriteIds</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;tableList,
                <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;validTxnList)</code>
<div class="block">Get the table write Ids that are valid for the current transaction.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#heartbeat--">heartbeat</a></span>()</code>
<div class="block">Send a heartbeat to the transaction management storage so other Hive
 clients know that the transaction and locks held by this client are
 still valid.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#isImplicitTransactionOpen--">isImplicitTransactionOpen</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#isTxnOpen--">isTxnOpen</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#lockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockDatabaseDesc-">lockDatabase</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;hiveDB,
            <a href="../../../../../../org/apache/hadoop/hive/ql/plan/LockDatabaseDesc.html" title="class in org.apache.hadoop.hive.ql.plan">LockDatabaseDesc</a>&nbsp;lockDb)</code>
<div class="block">This function is called to lock the database when explicit lock command is
 issued on a database.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#lockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockTableDesc-">lockTable</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;db,
         <a href="../../../../../../org/apache/hadoop/hive/ql/plan/LockTableDesc.html" title="class in org.apache.hadoop.hive.ql.plan">LockTableDesc</a>&nbsp;lockTbl)</code>
<div class="block">This function is called to lock the table when explicit lock command is
 issued on a table.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#openTxn-org.apache.hadoop.hive.ql.Context-java.lang.String-">openTxn</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql">Context</a>&nbsp;ctx,
       <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;user)</code>
<div class="block">Open a new transaction.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#recordSnapshot-org.apache.hadoop.hive.ql.QueryPlan-">recordSnapshot</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/QueryPlan.html" title="class in org.apache.hadoop.hive.ql">QueryPlan</a>&nbsp;queryPlan)</code>
<div class="block">In an explicit txn start_transaction is the 1st statement and we record the snapshot at the
 start of the txn for Snapshot Isolation.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#releaseLocks-java.util.List-">releaseLocks</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveLock.html" title="class in org.apache.hadoop.hive.ql.lockmgr">HiveLock</a>&gt;&nbsp;hiveLocks)</code>
<div class="block">Release specified locks.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#replAllocateTableWriteIdsBatch-java.lang.String-java.lang.String-java.lang.String-java.util.List-">replAllocateTableWriteIdsBatch</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName,
                              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
                              <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/api/TxnToWriteId.html" title="class in org.apache.hadoop.hive.metastore.api">TxnToWriteId</a>&gt;&nbsp;srcTxnToWriteIdList)</code>
<div class="block">Allocates write id for each transaction in the list.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#replCommitTxn-java.lang.String-long-">replCommitTxn</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
             long&nbsp;srcTxnId)</code>
<div class="block">Commit the transaction in target cluster.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#replOpenTxn-java.lang.String-java.util.List-java.lang.String-">replOpenTxn</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
           <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;srcTxnIds,
           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;user)</code>
<div class="block">Open a new transaction in target cluster.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#replRollbackTxn-java.lang.String-long-">replRollbackTxn</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
               long&nbsp;srcTxnId)</code>
<div class="block">Abort the transaction in target cluster.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#replTableWriteIdState-java.lang.String-java.lang.String-java.lang.String-java.util.List-">replTableWriteIdState</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;validWriteIdList,
                     <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                     <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName,
                     <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;partNames)</code>
<div class="block">Replicate Table Write Ids state to mark aborted write ids and writeid high water mark.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#rollbackTxn--">rollbackTxn</a></span>()</code>
<div class="block">Abort the current transaction.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#setConf-org.apache.hadoop.conf.Configuration-">setConf</a></span>(org.apache.hadoop.conf.Configuration&nbsp;c)</code>&nbsp;</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#supportsAcid--">supportsAcid</a></span>()</code>
<div class="block">Indicate whether this transaction manager supports ACID operations.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#supportsExplicitLock--">supportsExplicitLock</a></span>()</code>
<div class="block">Indicate whether this lock manager supports the use of <code>lock
 <i>database</i></code> or <code>lock <i>table</i></code>.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#unlockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockDatabaseDesc-">unlockDatabase</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;hiveDB,
              <a href="../../../../../../org/apache/hadoop/hive/ql/plan/UnlockDatabaseDesc.html" title="class in org.apache.hadoop.hive.ql.plan">UnlockDatabaseDesc</a>&nbsp;unlockDb)</code>
<div class="block">This function is called to unlock the database when explicit unlock command
 is issued on a database.</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#unlockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockTableDesc-">unlockTable</a></span>(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;hiveDB,
           <a href="../../../../../../org/apache/hadoop/hive/ql/plan/UnlockTableDesc.html" title="class in org.apache.hadoop.hive.ql.plan">UnlockTableDesc</a>&nbsp;unlockTbl)</code>
<div class="block">This function is called to unlock the table when explicit unlock command is
 issued on a table.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#useNewShowLocksFormat--">useNewShowLocksFormat</a></span>()</code>
<div class="block">Indicate whether this transaction manager returns information about locks in the new format
 for show locks or the old one.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="conf">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>conf</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hive/conf/HiveConf.html" title="class in org.apache.hadoop.hive.conf">HiveConf</a> conf</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="replOpenTxn-java.lang.String-java.util.List-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replOpenTxn</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;replOpenTxn(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
                              <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;srcTxnIds,
                              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;user)
                       throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#replOpenTxn-java.lang.String-java.util.List-java.lang.String-">HiveTxnManager</a></code></span></div>
<div class="block">Open a new transaction in target cluster.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>replPolicy</code> - Replication policy to uniquely identify the source cluster.</dd>
<dd><code>srcTxnIds</code> - The ids of the transaction at the source cluster</dd>
<dd><code>user</code> - The user who has fired the repl load command</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The new transaction id.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - in case of failure to start the transaction.</dd>
</dl>
</li>
</ul>
<a name="openTxn-org.apache.hadoop.hive.ql.Context-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openTxn</h4>
<pre>public&nbsp;long&nbsp;openTxn(<a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql">Context</a>&nbsp;ctx,
                    <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;user)
             throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#openTxn-org.apache.hadoop.hive.ql.Context-java.lang.String-">HiveTxnManager</a></code></span></div>
<div class="block">Open a new transaction.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ctx</code> - Context for this query</dd>
<dd><code>user</code> - Hive user who is opening this transaction.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The new transaction id</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - if a transaction is already open.</dd>
</dl>
</li>
</ul>
<a name="getLockManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLockManager</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveLockManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveLockManager</a>&nbsp;getLockManager()
                               throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block">we don't expect multiple threads to call this method concurrently but <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html#lockMgr"><code>lockMgr</code></a> will
 be read by a different threads than one writing it, thus it's <code>volatile</code></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the instance of the lock manager</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - if there is an issue obtaining the lock manager.</dd>
</dl>
</li>
</ul>
<a name="acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireLocks</h4>
<pre>public&nbsp;void&nbsp;acquireLocks(<a href="../../../../../../org/apache/hadoop/hive/ql/QueryPlan.html" title="class in org.apache.hadoop.hive.ql">QueryPlan</a>&nbsp;plan,
                         <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql">Context</a>&nbsp;ctx,
                         <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username)
                  throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-">HiveTxnManager</a></code></span></div>
<div class="block">Acquire all of the locks needed by a query.  If used with a query that
 requires transactions, this should be called after <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#openTxn-org.apache.hadoop.hive.ql.Context-java.lang.String-"><code>HiveTxnManager.openTxn(Context, String)</code></a>.
 A list of acquired locks will be stored in the
 <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql"><code>Context</code></a> object and can be retrieved
 via <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html#getHiveLocks--"><code>Context.getHiveLocks()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>plan</code> - query plan</dd>
<dd><code>ctx</code> - Context for this query</dd>
<dd><code>username</code> - name of the user for this query</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - if there is an error getting the locks.  Use <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html#getCanonicalErrorMsg--"><code>HiveException.getCanonicalErrorMsg()</code></a>
 to get more info on how to handle the exception.</dd>
</dl>
</li>
</ul>
<a name="releaseLocks-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseLocks</h4>
<pre>public&nbsp;void&nbsp;releaseLocks(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveLock.html" title="class in org.apache.hadoop.hive.ql.lockmgr">HiveLock</a>&gt;&nbsp;hiveLocks)
                  throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#releaseLocks-java.util.List-">HiveTxnManager</a></code></span></div>
<div class="block">Release specified locks.
 Transaction aware TxnManagers, which has <code>supportsAcid() == true</code>,
 will track locks internally and ignore this parameter</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hiveLocks</code> - The list of locks to be released.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="replCommitTxn-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replCommitTxn</h4>
<pre>public&nbsp;void&nbsp;replCommitTxn(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
                          long&nbsp;srcTxnId)
                   throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#replCommitTxn-java.lang.String-long-">HiveTxnManager</a></code></span></div>
<div class="block">Commit the transaction in target cluster.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>replPolicy</code> - Replication policy to uniquely identify the source cluster.</dd>
<dd><code>srcTxnId</code> - The id of the transaction at the source cluster</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - in case of failure to commit the transaction.</dd>
</dl>
</li>
</ul>
<a name="commitTxn--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitTxn</h4>
<pre>public&nbsp;void&nbsp;commitTxn()
               throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#commitTxn--">HiveTxnManager</a></code></span></div>
<div class="block">Commit the current transaction.  This will release all locks obtained in
 <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-"><code>HiveTxnManager.acquireLocks(org.apache.hadoop.hive.ql.QueryPlan,
 org.apache.hadoop.hive.ql.Context, java.lang.String)</code></a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - if there is no current transaction or the
 transaction has already been committed or aborted.</dd>
</dl>
</li>
</ul>
<a name="replRollbackTxn-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replRollbackTxn</h4>
<pre>public&nbsp;void&nbsp;replRollbackTxn(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
                            long&nbsp;srcTxnId)
                     throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#replRollbackTxn-java.lang.String-long-">HiveTxnManager</a></code></span></div>
<div class="block">Abort the transaction in target cluster.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>replPolicy</code> - Replication policy to uniquely identify the source cluster.</dd>
<dd><code>srcTxnId</code> - The id of the transaction at the source cluster</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - in case of failure to abort the transaction.</dd>
</dl>
</li>
</ul>
<a name="rollbackTxn--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackTxn</h4>
<pre>public&nbsp;void&nbsp;rollbackTxn()
                 throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#rollbackTxn--">HiveTxnManager</a></code></span></div>
<div class="block">Abort the current transaction.  This will release all locks obtained in
 <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-"><code>HiveTxnManager.acquireLocks(org.apache.hadoop.hive.ql.QueryPlan,
 org.apache.hadoop.hive.ql.Context, java.lang.String)</code></a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - if there is no current transaction or the
 transaction has already been committed or aborted.</dd>
</dl>
</li>
</ul>
<a name="replTableWriteIdState-java.lang.String-java.lang.String-java.lang.String-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replTableWriteIdState</h4>
<pre>public&nbsp;void&nbsp;replTableWriteIdState(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;validWriteIdList,
                                  <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                                  <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName,
                                  <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;partNames)
                           throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#replTableWriteIdState-java.lang.String-java.lang.String-java.lang.String-java.util.List-">HiveTxnManager</a></code></span></div>
<div class="block">Replicate Table Write Ids state to mark aborted write ids and writeid high water mark.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>validWriteIdList</code> - Snapshot of writeid list when the table/partition is dumped.</dd>
<dd><code>dbName</code> - Database name</dd>
<dd><code>tableName</code> - Table which is written.</dd>
<dd><code>partNames</code> - List of partitions being written.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - in case of failure.</dd>
</dl>
</li>
</ul>
<a name="heartbeat--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeat</h4>
<pre>public&nbsp;void&nbsp;heartbeat()
               throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#heartbeat--">HiveTxnManager</a></code></span></div>
<div class="block">Send a heartbeat to the transaction management storage so other Hive
 clients know that the transaction and locks held by this client are
 still valid.  For implementations that do not require heartbeats this
 can be a no-op.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - If current transaction exists or the transaction
 has already been committed or aborted.</dd>
</dl>
</li>
</ul>
<a name="getValidTxns--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getValidTxns</h4>
<pre>public&nbsp;org.apache.hadoop.hive.common.ValidTxnList&nbsp;getValidTxns()
                                                        throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#getValidTxns--">HiveTxnManager</a></code></span></div>
<div class="block">Get the transactions that are currently valid.  The resulting
 <code>ValidTxnList</code> object can be passed as string to the processing
 tasks for use in the reading the data.  This call should be made once up
 front by the planner and should never be called on the backend,
 as this will violate the isolation level semantics.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of valid transactions.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="getValidWriteIds-java.util.List-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getValidWriteIds</h4>
<pre>public&nbsp;org.apache.hadoop.hive.common.ValidTxnWriteIdList&nbsp;getValidWriteIds(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;tableList,
                                                                          <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;validTxnList)
                                                                   throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#getValidWriteIds-java.util.List-java.lang.String-">HiveTxnManager</a></code></span></div>
<div class="block">Get the table write Ids that are valid for the current transaction.  The resulting
 <code>ValidTxnWriteIdList</code> object can be passed as string to the processing
 tasks for use in the reading the data.  This call will return same results as long as validTxnString
 passed is same.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tableList</code> - list of tables (<db_name>.<table_name>) read/written by current transaction.</dd>
<dd><code>validTxnList</code> - snapshot of valid txns for the current txn</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of valid table write Ids.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="getTxnManagerName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTxnManagerName</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getTxnManagerName()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#getTxnManagerName--">HiveTxnManager</a></code></span></div>
<div class="block">Get the name for currently installed transaction manager.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>transaction manager name</dd>
</dl>
</li>
</ul>
<a name="supportsExplicitLock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>supportsExplicitLock</h4>
<pre>public&nbsp;boolean&nbsp;supportsExplicitLock()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#supportsExplicitLock--">HiveTxnManager</a></code></span></div>
<div class="block">Indicate whether this lock manager supports the use of <code>lock
 <i>database</i></code> or <code>lock <i>table</i></code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="lockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockTableDesc-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockTable</h4>
<pre>public&nbsp;int&nbsp;lockTable(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;db,
                     <a href="../../../../../../org/apache/hadoop/hive/ql/plan/LockTableDesc.html" title="class in org.apache.hadoop.hive.ql.plan">LockTableDesc</a>&nbsp;lockTbl)
              throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#lockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockTableDesc-">HiveTxnManager</a></code></span></div>
<div class="block">This function is called to lock the table when explicit lock command is
 issued on a table.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#lockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockTableDesc-">lockTable</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>db</code> - an object to communicate with the metastore</dd>
<dd><code>lockTbl</code> - table locking info, such as table name, locking mode</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 if the locking succeeds, 1 otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
<a name="unlockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockTableDesc-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockTable</h4>
<pre>public&nbsp;int&nbsp;unlockTable(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;hiveDB,
                       <a href="../../../../../../org/apache/hadoop/hive/ql/plan/UnlockTableDesc.html" title="class in org.apache.hadoop.hive.ql.plan">UnlockTableDesc</a>&nbsp;unlockTbl)
                throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#unlockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockTableDesc-">HiveTxnManager</a></code></span></div>
<div class="block">This function is called to unlock the table when explicit unlock command is
 issued on a table.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#unlockTable-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockTableDesc-">unlockTable</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hiveDB</code> - an object to communicate with the metastore</dd>
<dd><code>unlockTbl</code> - table unlocking info, such as table name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 if the locking succeeds, 1 otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
<a name="lockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockDatabaseDesc-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockDatabase</h4>
<pre>public&nbsp;int&nbsp;lockDatabase(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;hiveDB,
                        <a href="../../../../../../org/apache/hadoop/hive/ql/plan/LockDatabaseDesc.html" title="class in org.apache.hadoop.hive.ql.plan">LockDatabaseDesc</a>&nbsp;lockDb)
                 throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#lockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockDatabaseDesc-">HiveTxnManager</a></code></span></div>
<div class="block">This function is called to lock the database when explicit lock command is
 issued on a database.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#lockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.LockDatabaseDesc-">lockDatabase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hiveDB</code> - an object to communicate with the metastore</dd>
<dd><code>lockDb</code> - database locking info, such as database name, locking mode</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 if the locking succeeds, 1 otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
<a name="unlockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockDatabaseDesc-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockDatabase</h4>
<pre>public&nbsp;int&nbsp;unlockDatabase(<a href="../../../../../../org/apache/hadoop/hive/ql/metadata/Hive.html" title="class in org.apache.hadoop.hive.ql.metadata">Hive</a>&nbsp;hiveDB,
                          <a href="../../../../../../org/apache/hadoop/hive/ql/plan/UnlockDatabaseDesc.html" title="class in org.apache.hadoop.hive.ql.plan">UnlockDatabaseDesc</a>&nbsp;unlockDb)
                   throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#unlockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockDatabaseDesc-">HiveTxnManager</a></code></span></div>
<div class="block">This function is called to unlock the database when explicit unlock command
 is issued on a database.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#unlockDatabase-org.apache.hadoop.hive.ql.metadata.Hive-org.apache.hadoop.hive.ql.plan.UnlockDatabaseDesc-">unlockDatabase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hiveDB</code> - an object to communicate with the metastore</dd>
<dd><code>unlockDb</code> - database unlocking info, such as database name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 if the locking succeeds, 1 otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
<a name="useNewShowLocksFormat--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useNewShowLocksFormat</h4>
<pre>public&nbsp;boolean&nbsp;useNewShowLocksFormat()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#useNewShowLocksFormat--">HiveTxnManager</a></code></span></div>
<div class="block">Indicate whether this transaction manager returns information about locks in the new format
 for show locks or the old one.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the new format should be used.</dd>
</dl>
</li>
</ul>
<a name="supportsAcid--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>supportsAcid</h4>
<pre>public&nbsp;boolean&nbsp;supportsAcid()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#supportsAcid--">HiveTxnManager</a></code></span></div>
<div class="block">Indicate whether this transaction manager supports ACID operations.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this transaction manager does ACID</dd>
</dl>
</li>
</ul>
<a name="recordSnapshot-org.apache.hadoop.hive.ql.QueryPlan-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordSnapshot</h4>
<pre>public&nbsp;boolean&nbsp;recordSnapshot(<a href="../../../../../../org/apache/hadoop/hive/ql/QueryPlan.html" title="class in org.apache.hadoop.hive.ql">QueryPlan</a>&nbsp;queryPlan)</pre>
<div class="block">In an explicit txn start_transaction is the 1st statement and we record the snapshot at the
 start of the txn for Snapshot Isolation.  For Read Committed (not supported yet) we'd record
 it before executing each statement (but after lock acquisition if using lock based concurrency
 control).
 For implicit txn, the stmt that triggered/started the txn is the first statement</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#recordSnapshot-org.apache.hadoop.hive.ql.QueryPlan-">recordSnapshot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
</dl>
</li>
</ul>
<a name="isImplicitTransactionOpen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isImplicitTransactionOpen</h4>
<pre>public&nbsp;boolean&nbsp;isImplicitTransactionOpen()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#isImplicitTransactionOpen--">isImplicitTransactionOpen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
</dl>
</li>
</ul>
<a name="destruct--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destruct</h4>
<pre>protected&nbsp;void&nbsp;destruct()</pre>
</li>
</ul>
<a name="isTxnOpen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTxnOpen</h4>
<pre>public&nbsp;boolean&nbsp;isTxnOpen()</pre>
</li>
</ul>
<a name="getCurrentTxnId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentTxnId</h4>
<pre>public&nbsp;long&nbsp;getCurrentTxnId()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#getCurrentTxnId--">HiveTxnManager</a></code></span></div>
<div class="block">if <code>isTxnOpen()</code>, returns the currently active transaction ID.</div>
</li>
</ul>
<a name="getStmtIdAndIncrement--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStmtIdAndIncrement</h4>
<pre>public&nbsp;int&nbsp;getStmtIdAndIncrement()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#getStmtIdAndIncrement--">HiveTxnManager</a></code></span></div>
<div class="block">Should be though of more as a unique write operation ID in a given txn (at QueryPlan level).
 Each statement writing data within a multi statement txn should have a unique WriteId.
 Even a single statement, (e.g. Merge, multi-insert may generates several writes).</div>
</li>
</ul>
<a name="getTableWriteId-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTableWriteId</h4>
<pre>public&nbsp;long&nbsp;getTableWriteId(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                            <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName)
                     throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#getTableWriteId-java.lang.String-java.lang.String-">HiveTxnManager</a></code></span></div>
<div class="block">if <code>isTxnOpen()</code>, returns the table write ID associated with current active transaction.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="acquireMaterializationRebuildLock-java.lang.String-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireMaterializationRebuildLock</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hive/metastore/api/LockResponse.html" title="class in org.apache.hadoop.hive.metastore.api">LockResponse</a>&nbsp;acquireMaterializationRebuildLock(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                                                      <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName,
                                                      long&nbsp;txnId)
                                               throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireMaterializationRebuildLock-java.lang.String-java.lang.String-long-">HiveTxnManager</a></code></span></div>
<div class="block">Acquire the materialization rebuild lock for a given view. We need to specify the fully
 qualified name of the materialized view and the open transaction ID so we can identify
 uniquely the lock.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireMaterializationRebuildLock-java.lang.String-java.lang.String-long-">acquireMaterializationRebuildLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the response from the metastore, where the lock id is equal to the txn id and
 the status can be either ACQUIRED or NOT ACQUIRED</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="replAllocateTableWriteIdsBatch-java.lang.String-java.lang.String-java.lang.String-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replAllocateTableWriteIdsBatch</h4>
<pre>public&nbsp;void&nbsp;replAllocateTableWriteIdsBatch(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;dbName,
                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;tableName,
                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;replPolicy,
                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/api/TxnToWriteId.html" title="class in org.apache.hadoop.hive.metastore.api">TxnToWriteId</a>&gt;&nbsp;srcTxnToWriteIdList)
                                    throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#replAllocateTableWriteIdsBatch-java.lang.String-java.lang.String-java.lang.String-java.util.List-">HiveTxnManager</a></code></span></div>
<div class="block">Allocates write id for each transaction in the list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbName</code> - database name</dd>
<dd><code>tableName</code> - the name of the table to allocate the write id</dd>
<dd><code>replPolicy</code> - used by replication task to identify the source cluster</dd>
<dd><code>srcTxnToWriteIdList</code> - List of txn id to write id Map</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="getHeartbeatInterval-org.apache.hadoop.conf.Configuration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeartbeatInterval</h4>
<pre>public static&nbsp;long&nbsp;getHeartbeatInterval(org.apache.hadoop.conf.Configuration&nbsp;conf)
                                 throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code></dd>
</dl>
</li>
</ul>
<a name="setConf-org.apache.hadoop.conf.Configuration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setConf</h4>
<pre>public&nbsp;void&nbsp;setConf(org.apache.hadoop.conf.Configuration&nbsp;c)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>setConf</code>&nbsp;in interface&nbsp;<code>org.apache.hadoop.conf.Configurable</code></dd>
</dl>
</li>
</ul>
<a name="getConf--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConf</h4>
<pre>public&nbsp;org.apache.hadoop.conf.Configuration&nbsp;getConf()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getConf</code>&nbsp;in interface&nbsp;<code>org.apache.hadoop.conf.Configurable</code></dd>
</dl>
</li>
</ul>
<a name="closeTxnManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeTxnManager</h4>
<pre>public&nbsp;void&nbsp;closeTxnManager()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#closeTxnManager--">HiveTxnManager</a></code></span></div>
<div class="block">This call closes down the transaction manager.  All open transactions
 are aborted.  If no transactions are open but locks are held those locks
 are released.  This method should be called if processing of a session
 is being halted in an abnormal way.  It avoids locks and transactions
 timing out.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#closeTxnManager--">closeTxnManager</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
</dl>
</li>
</ul>
<a name="acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-org.apache.hadoop.hive.ql.Driver.LockedDriverState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireLocks</h4>
<pre>public&nbsp;void&nbsp;acquireLocks(<a href="../../../../../../org/apache/hadoop/hive/ql/QueryPlan.html" title="class in org.apache.hadoop.hive.ql">QueryPlan</a>&nbsp;plan,
                         <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql">Context</a>&nbsp;ctx,
                         <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username,
                         <a href="../../../../../../org/apache/hadoop/hive/ql/Driver.LockedDriverState.html" title="class in org.apache.hadoop.hive.ql">Driver.LockedDriverState</a>&nbsp;lDrvState)
                  throws <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-org.apache.hadoop.hive.ql.Driver.LockedDriverState-">HiveTxnManager</a></code></span></div>
<div class="block">Acquire all of the locks needed by a query.  If used with a query that
 requires transactions, this should be called after <a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#openTxn-org.apache.hadoop.hive.ql.Context-java.lang.String-"><code>HiveTxnManager.openTxn(Context, String)</code></a>.
 A list of acquired locks will be stored in the
 <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html" title="class in org.apache.hadoop.hive.ql"><code>Context</code></a> object and can be retrieved
 via <a href="../../../../../../org/apache/hadoop/hive/ql/Context.html#getHiveLocks--"><code>Context.getHiveLocks()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html#acquireLocks-org.apache.hadoop.hive.ql.QueryPlan-org.apache.hadoop.hive.ql.Context-java.lang.String-org.apache.hadoop.hive.ql.Driver.LockedDriverState-">acquireLocks</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveTxnManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveTxnManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>plan</code> - query plan</dd>
<dd><code>ctx</code> - Context for this query</dd>
<dd><code>username</code> - name of the user for this query</dd>
<dd><code>lDrvState</code> - the state to inform if the query cancelled or not</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/LockException.html" title="class in org.apache.hadoop.hive.ql.lockmgr">LockException</a></code> - if there is an error getting the locks</dd>
</dl>
</li>
</ul>
<a name="finalize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()
                 throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></code></dd>
</dl>
</li>
</ul>
<a name="getAndCheckLockManager--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAndCheckLockManager</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/HiveLockManager.html" title="interface in org.apache.hadoop.hive.ql.lockmgr">HiveLockManager</a>&nbsp;getAndCheckLockManager()
                                          throws <a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></pre>
<div class="block">Gets the lock manager and verifies if the explicit lock is supported</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the lock manager</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hive/ql/metadata/HiveException.html" title="class in org.apache.hadoop.hive.ql.metadata">HiveException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DbTxnManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbLockManager.html" title="class in org.apache.hadoop.hive.ql.lockmgr"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.Heartbeater.html" title="class in org.apache.hadoop.hive.ql.lockmgr"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hive/ql/lockmgr/DbTxnManager.html" target="_top">Frames</a></li>
<li><a href="DbTxnManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>

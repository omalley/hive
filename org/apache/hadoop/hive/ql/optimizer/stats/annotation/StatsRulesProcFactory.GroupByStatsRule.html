<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_192-ea) on Mon Aug 26 13:33:02 PDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>StatsRulesProcFactory.GroupByStatsRule (Hive 3.1.2 API)</title>
<meta name="date" content="2019-08-26">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StatsRulesProcFactory.GroupByStatsRule (Hive 3.1.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StatsRulesProcFactory.GroupByStatsRule.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.FilterStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.JoinStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.GroupByStatsRule.html" target="_top">Frames</a></li>
<li><a href="StatsRulesProcFactory.GroupByStatsRule.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hive.ql.optimizer.stats.annotation</div>
<h2 title="Class StatsRulesProcFactory.GroupByStatsRule" class="title">Class StatsRulesProcFactory.GroupByStatsRule</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.DefaultStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation">org.apache.hadoop.hive.ql.optimizer.stats.annotation.StatsRulesProcFactory.DefaultStatsRule</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hive.ql.optimizer.stats.annotation.StatsRulesProcFactory.GroupByStatsRule</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessor.html" title="interface in org.apache.hadoop.hive.ql.lib">NodeProcessor</a></dd>
</dl>
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation">StatsRulesProcFactory</a></dd>
</dl>
<hr>
<br>
<pre>public static class <span class="typeNameLabel">StatsRulesProcFactory.GroupByStatsRule</span>
extends <a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.DefaultStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation">StatsRulesProcFactory.DefaultStatsRule</a>
implements <a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessor.html" title="interface in org.apache.hadoop.hive.ql.lib">NodeProcessor</a></pre>
<div class="block">GROUPBY operator changes the number of rows. The number of rows emitted by GBY operator will be
 atleast 1 or utmost T(R) (number of rows in relation T) based on the aggregation. A better
 estimate can be found if we have column statistics on the columns that we are grouping on.
 <p>
 Suppose if we are grouping by attributes A,B,C and if statistics for columns A,B,C are
 available then a better estimate can be found by taking the smaller of product of V(R,[A,B,C])
 (product of distinct cardinalities of A,B,C) and T(R)/2.
 <p>
 T(R) = min (T(R)/2 , V(R,[A,B,C]) ---> [1]
 <p>
 In the presence of grouping sets, map-side GBY will emit more rows depending on the size of
 grouping set (input rows * size of grouping set). These rows will get reduced because of
 map-side hash aggregation. Hash aggregation is an optimization in hive to reduce the number of
 rows shuffled between map and reduce stage. This optimization will be disabled if the memory
 used for hash aggregation exceeds 90% of max available memory for hash aggregation. The number
 of rows emitted from map-side will vary if hash aggregation is enabled throughout execution or
 disabled. In the presence of grouping sets, following rules will be applied
 <p>
 If <b>hash-aggregation is enabled</b>, for query SELECT * FROM table GROUP BY (A,B) WITH CUBE
 <p>
 T(R) = min(T(R)/2, T(R, GBY(A,B)) + T(R, GBY(A)) + T(R, GBY(B)) + 1))
 <p>
 where, GBY(A,B), GBY(B), GBY(B) are the GBY rules mentioned above [1]
 <p>
 If <b>hash-aggregation is disabled</b>, apply the GBY rule [1] and then multiply the result by
 number of elements in grouping set T(R) = T(R) * length_of_grouping_set. Since we do not know
 if hash-aggregation is enabled or disabled during compile time, we will assume worst-case i.e,
 hash-aggregation is disabled
 <p>
 NOTE: The number of rows from map-side GBY operator is dependent on map-side parallelism i.e,
 number of mappers. The map-side parallelism is expected from hive config
 "hive.stats.map.parallelism". If the config is not set then default parallelism of 1 will be
 assumed.
 <p>
 <i>Worst case:</i> If no column statistics are available, then T(R) = T(R)/2 will be used as
 heuristics.
 <p>
 <i>For more information, refer 'Estimating The Cost Of Operations' chapter in
 "Database Systems: The Complete Book" by Garcia-Molina et. al.</i>
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.GroupByStatsRule.html#GroupByStatsRule--">GroupByStatsRule</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.GroupByStatsRule.html#process-org.apache.hadoop.hive.ql.lib.Node-java.util.Stack-org.apache.hadoop.hive.ql.lib.NodeProcessorCtx-java.lang.Object...-">process</a></span>(<a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/Node.html" title="interface in org.apache.hadoop.hive.ql.lib">Node</a>&nbsp;nd,
       <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Stack.html?is-external=true" title="class or interface in java.util">Stack</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/Node.html" title="interface in org.apache.hadoop.hive.ql.lib">Node</a>&gt;&nbsp;stack,
       <a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessorCtx.html" title="interface in org.apache.hadoop.hive.ql.lib">NodeProcessorCtx</a>&nbsp;procCtx,
       <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;nodeOutputs)</code>
<div class="block">Generic process for all ops that don't have specific implementations.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GroupByStatsRule--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GroupByStatsRule</h4>
<pre>public&nbsp;GroupByStatsRule()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="process-org.apache.hadoop.hive.ql.lib.Node-java.util.Stack-org.apache.hadoop.hive.ql.lib.NodeProcessorCtx-java.lang.Object...-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>process</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;process(<a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/Node.html" title="interface in org.apache.hadoop.hive.ql.lib">Node</a>&nbsp;nd,
                      <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Stack.html?is-external=true" title="class or interface in java.util">Stack</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/Node.html" title="interface in org.apache.hadoop.hive.ql.lib">Node</a>&gt;&nbsp;stack,
                      <a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessorCtx.html" title="interface in org.apache.hadoop.hive.ql.lib">NodeProcessorCtx</a>&nbsp;procCtx,
                      <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;nodeOutputs)
               throws <a href="../../../../../../../../org/apache/hadoop/hive/ql/parse/SemanticException.html" title="class in org.apache.hadoop.hive.ql.parse">SemanticException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessor.html#process-org.apache.hadoop.hive.ql.lib.Node-java.util.Stack-org.apache.hadoop.hive.ql.lib.NodeProcessorCtx-java.lang.Object...-">NodeProcessor</a></code></span></div>
<div class="block">Generic process for all ops that don't have specific implementations.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessor.html#process-org.apache.hadoop.hive.ql.lib.Node-java.util.Stack-org.apache.hadoop.hive.ql.lib.NodeProcessorCtx-java.lang.Object...-">process</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hive/ql/lib/NodeProcessor.html" title="interface in org.apache.hadoop.hive.ql.lib">NodeProcessor</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.DefaultStatsRule.html#process-org.apache.hadoop.hive.ql.lib.Node-java.util.Stack-org.apache.hadoop.hive.ql.lib.NodeProcessorCtx-java.lang.Object...-">process</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.DefaultStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation">StatsRulesProcFactory.DefaultStatsRule</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nd</code> - operator to process</dd>
<dd><code>procCtx</code> - operator processor context</dd>
<dd><code>nodeOutputs</code> - A variable argument list of outputs from other nodes in the walk</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Object to be returned by the process call</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hive/ql/parse/SemanticException.html" title="class in org.apache.hadoop.hive.ql.parse">SemanticException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StatsRulesProcFactory.GroupByStatsRule.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.FilterStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.JoinStatsRule.html" title="class in org.apache.hadoop.hive.ql.optimizer.stats.annotation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/hadoop/hive/ql/optimizer/stats/annotation/StatsRulesProcFactory.GroupByStatsRule.html" target="_top">Frames</a></li>
<li><a href="StatsRulesProcFactory.GroupByStatsRule.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>

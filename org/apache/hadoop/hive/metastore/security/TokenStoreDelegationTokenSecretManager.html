<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_192-ea) on Mon Aug 26 13:32:53 PDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TokenStoreDelegationTokenSecretManager (Hive 3.1.2 API)</title>
<meta name="date" content="2019-08-26">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TokenStoreDelegationTokenSecretManager (Hive 3.1.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":9,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TokenStoreDelegationTokenSecretManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TFilterTransport.html" title="class in org.apache.hadoop.hive.metastore.security"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.ExpiredTokenRemover.html" title="class in org.apache.hadoop.hive.metastore.security"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html" target="_top">Frames</a></li>
<li><a href="TokenStoreDelegationTokenSecretManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hive.metastore.security</div>
<h2 title="Class TokenStoreDelegationTokenSecretManager" class="title">Class TokenStoreDelegationTokenSecretManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.security.token.SecretManager&lt;TokenIdent&gt;</li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html" title="class in org.apache.hadoop.hive.metastore.security">org.apache.hadoop.hive.metastore.security.DelegationTokenSecretManager</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hive.metastore.security.TokenStoreDelegationTokenSecretManager</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">TokenStoreDelegationTokenSecretManager</span>
extends <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenSecretManager</a></pre>
<div class="block">Extension of <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html" title="class in org.apache.hadoop.hive.metastore.security"><code>DelegationTokenSecretManager</code></a> to support alternative to default in-memory
 token management for fail-over and clustering through plug-able token store (ZooKeeper etc.).
 Delegation tokens will be retrieved from the store on-demand and (unlike base class behavior) not
 cached in memory. This avoids complexities related to token expiration. The security token is
 needed only at the time the transport is opened (as opposed to per interface operation). The
 assumption therefore is low cost of interprocess token retrieval (for random read efficient store
 such as ZooKeeper) compared to overhead of synchronizing per-process in-memory token caches.
 The wrapper incorporates the token store abstraction within the limitations of current
 Hive/Hadoop dependency (.20S) with minimum code duplication.
 Eventually this should be supported by Hadoop security directly.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.ExpiredTokenRemover.html" title="class in org.apache.hadoop.hive.metastore.security">TokenStoreDelegationTokenSecretManager.ExpiredTokenRemover</a></span></code>
<div class="block">Cloned from <code>AbstractDelegationTokenSecretManager</code> to deal with private access
 restriction (there would not be an need to clone the remove thread if the remove logic was
 protected/extensible).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager</h3>
<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager.DelegationTokenInformation</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.apache.hadoop.security.token.SecretManager">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.hadoop.security.token.SecretManager</h3>
<code>org.apache.hadoop.security.token.SecretManager.InvalidToken</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager</h3>
<code>allKeys, currentId, currentTokens, delegationTokenSequenceNumber, noInterruptsLock, running, storeTokenTrackingId</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#TokenStoreDelegationTokenSecretManager-long-long-long-long-org.apache.hadoop.hive.metastore.security.DelegationTokenStore-">TokenStoreDelegationTokenSecretManager</a></span>(long&nbsp;delegationKeyUpdateInterval,
                                      long&nbsp;delegationTokenMaxLifetime,
                                      long&nbsp;delegationTokenRenewInterval,
                                      long&nbsp;delegationTokenRemoverScanInterval,
                                      <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenStore.html" title="interface in org.apache.hadoop.hive.metastore.security">DelegationTokenStore</a>&nbsp;sharedStore)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#cancelToken-org.apache.hadoop.security.token.Token-java.lang.String-">cancelToken</a></span>(org.apache.hadoop.security.token.Token&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;&nbsp;token,
           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;canceller)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#createPassword-org.apache.hadoop.hive.metastore.security.DelegationTokenIdentifier-">createPassword</a></span>(<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&nbsp;id)</code>
<div class="block">Create the password and add it to shared store.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#decodeWritable-org.apache.hadoop.io.Writable-java.lang.String-">decodeWritable</a></span>(org.apache.hadoop.io.Writable&nbsp;w,
              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;idStr)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#encodeWritable-org.apache.hadoop.io.Writable-">encodeWritable</a></span>(org.apache.hadoop.io.Writable&nbsp;key)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#logUpdateMasterKey-org.apache.hadoop.security.token.delegation.DelegationKey-">logUpdateMasterKey</a></span>(org.apache.hadoop.security.token.delegation.DelegationKey&nbsp;key)</code>
<div class="block">Synchronize master key updates / sequence generation for multiple nodes.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,org.apache.hadoop.security.token.delegation.DelegationKey&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#reloadKeys--">reloadKeys</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#removeExpiredTokens--">removeExpiredTokens</a></span>()</code>
<div class="block">Remove expired tokens.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#renewToken-org.apache.hadoop.security.token.Token-java.lang.String-">renewToken</a></span>(org.apache.hadoop.security.token.Token&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;&nbsp;token,
          <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;renewer)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#retrievePassword-org.apache.hadoop.hive.metastore.security.DelegationTokenIdentifier-">retrievePassword</a></span>(<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&nbsp;identifier)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#rollMasterKeyExt--">rollMasterKeyExt</a></span>()</code>
<div class="block">Extension of rollMasterKey to remove expired keys from store.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#startThreads--">startThreads</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html#stopThreads--">stopThreads</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.hadoop.hive.metastore.security.DelegationTokenSecretManager">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hive.metastore.security.<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenSecretManager</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#cancelDelegationToken-java.lang.String-">cancelDelegationToken</a>, <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#createIdentifier--">createIdentifier</a>, <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#getDelegationToken-java.lang.String-java.lang.String-">getDelegationToken</a>, <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#getTokenIdentifier-org.apache.hadoop.security.token.Token-">getTokenIdentifier</a>, <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#getUserFromToken-java.lang.String-">getUserFromToken</a>, <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#renewDelegationToken-java.lang.String-">renewDelegationToken</a>, <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenSecretManager.html#verifyDelegationToken-java.lang.String-">verifyDelegationToken</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager</h3>
<code>addKey, addPersistedDelegationToken, checkToken, createSecretKey, decodeTokenIdentifier, getAllKeys, getCurrentKeyId, getDelegationKey, getDelegationTokenSeqNum, getTokenInfo, getTokenTrackingId, getTrackingIdIfEnabled, incrementCurrentKeyId, incrementDelegationTokenSeqNum, isRunning, logExpireToken, logExpireTokens, removeStoredMasterKey, removeStoredToken, reset, setCurrentKeyId, setDelegationTokenSeqNum, storeDelegationKey, storeNewMasterKey, storeNewToken, storeToken, updateDelegationKey, updateStoredToken, updateToken, verifyToken</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.hadoop.security.token.SecretManager">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.security.token.SecretManager</h3>
<code>checkAvailableForRead, createPassword, generateSecret, retriableRetrievePassword</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TokenStoreDelegationTokenSecretManager-long-long-long-long-org.apache.hadoop.hive.metastore.security.DelegationTokenStore-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TokenStoreDelegationTokenSecretManager</h4>
<pre>public&nbsp;TokenStoreDelegationTokenSecretManager(long&nbsp;delegationKeyUpdateInterval,
                                              long&nbsp;delegationTokenMaxLifetime,
                                              long&nbsp;delegationTokenRenewInterval,
                                              long&nbsp;delegationTokenRemoverScanInterval,
                                              <a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenStore.html" title="interface in org.apache.hadoop.hive.metastore.security">DelegationTokenStore</a>&nbsp;sharedStore)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="reloadKeys--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reloadKeys</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,org.apache.hadoop.security.token.delegation.DelegationKey&gt;&nbsp;reloadKeys()</pre>
</li>
</ul>
<a name="retrievePassword-org.apache.hadoop.hive.metastore.security.DelegationTokenIdentifier-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrievePassword</h4>
<pre>public&nbsp;byte[]&nbsp;retrievePassword(<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&nbsp;identifier)
                        throws org.apache.hadoop.security.token.SecretManager.InvalidToken</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>retrievePassword</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.apache.hadoop.security.token.SecretManager.InvalidToken</code></dd>
</dl>
</li>
</ul>
<a name="cancelToken-org.apache.hadoop.security.token.Token-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelToken</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&nbsp;cancelToken(org.apache.hadoop.security.token.Token&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;&nbsp;token,
                                             <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;canceller)
                                      throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>cancelToken</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="createPassword-org.apache.hadoop.hive.metastore.security.DelegationTokenIdentifier-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPassword</h4>
<pre>protected&nbsp;byte[]&nbsp;createPassword(<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&nbsp;id)</pre>
<div class="block">Create the password and add it to shared store.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>createPassword</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="renewToken-org.apache.hadoop.security.token.Token-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renewToken</h4>
<pre>public&nbsp;long&nbsp;renewToken(org.apache.hadoop.security.token.Token&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;&nbsp;token,
                       <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;renewer)
                throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>renewToken</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="encodeWritable-org.apache.hadoop.io.Writable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeWritable</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;encodeWritable(org.apache.hadoop.io.Writable&nbsp;key)
                             throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="decodeWritable-org.apache.hadoop.io.Writable-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decodeWritable</h4>
<pre>public static&nbsp;void&nbsp;decodeWritable(org.apache.hadoop.io.Writable&nbsp;w,
                                  <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;idStr)
                           throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="logUpdateMasterKey-org.apache.hadoop.security.token.delegation.DelegationKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logUpdateMasterKey</h4>
<pre>protected&nbsp;void&nbsp;logUpdateMasterKey(org.apache.hadoop.security.token.delegation.DelegationKey&nbsp;key)
                           throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Synchronize master key updates / sequence generation for multiple nodes.
 NOTE: <code>AbstractDelegationTokenSecretManager</code> keeps currentKey private, so we need
 to utilize this "hook" to manipulate the key through the object reference.
 This .20S workaround should cease to exist when Hadoop supports token store.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>logUpdateMasterKey</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="startThreads--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startThreads</h4>
<pre>public&nbsp;void&nbsp;startThreads()
                  throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>startThreads</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="stopThreads--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopThreads</h4>
<pre>public&nbsp;void&nbsp;stopThreads()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>stopThreads</code>&nbsp;in class&nbsp;<code>org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager&lt;<a href="../../../../../../org/apache/hadoop/hive/metastore/security/DelegationTokenIdentifier.html" title="class in org.apache.hadoop.hive.metastore.security">DelegationTokenIdentifier</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="removeExpiredTokens--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeExpiredTokens</h4>
<pre>protected&nbsp;void&nbsp;removeExpiredTokens()</pre>
<div class="block">Remove expired tokens. Replaces logic in <code>AbstractDelegationTokenSecretManager</code>
 that cannot be reused due to private method access. Logic here can more efficiently
 deal with external token store by only loading into memory the minimum data needed.</div>
</li>
</ul>
<a name="rollMasterKeyExt--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>rollMasterKeyExt</h4>
<pre>protected&nbsp;void&nbsp;rollMasterKeyExt()
                         throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Extension of rollMasterKey to remove expired keys from store.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TokenStoreDelegationTokenSecretManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TFilterTransport.html" title="class in org.apache.hadoop.hive.metastore.security"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.ExpiredTokenRemover.html" title="class in org.apache.hadoop.hive.metastore.security"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hive/metastore/security/TokenStoreDelegationTokenSecretManager.html" target="_top">Frames</a></li>
<li><a href="TokenStoreDelegationTokenSecretManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
